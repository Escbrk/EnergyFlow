{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/img/svg/sprite.svg","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://energyflow.b.goit.study/api/';\n\nexport const getQuote = async () => {\n  const { data } = await axios.get('quote');\n  return data;\n};\n\nexport const getExercise = async (query = 'Muscles', page = 1) => {\n  const windowWidth = window.innerWidth;\n  let limit = null;\n\n  if (windowWidth <= 767) {\n    limit = 8;\n  } else {\n    limit = 12;\n  }\n\n  const { data } = await axios.get(\n    `filters?filter=${query}&page=${page}&limit=${limit}`\n  );\n\n  return data;\n};\n\nexport const getExerciseInfo = async (category, query, page = 1) => {\n  const windowWidth = window.innerWidth;\n  let limit = null;\n\n  if (windowWidth <= 1439) {\n    limit = 8;\n  } else {\n    limit = 9;\n  }\n\n  const { data } = await axios.get(\n    `exercises?${category}=${query}&page=${page}&limit=${limit}`\n  );\n\n  return data;\n};\n\n","export default \"__VITE_ASSET__GcBWLkSN__\"","import { getQuote, getExercise, getExerciseInfo } from './api.js';\nimport spritePath from '../img/svg/sprite.svg';\n\nconst refs = {\n  quoteBlock: document.getElementById('quote'),\n  exerciseList: document.querySelector('.exercise-list'),\n  pagination: document.querySelector('.pagination'),\n  filterList: document.querySelector('.filter-list'),\n  categoryContainer: document.querySelector('.category-container'),\n  exerciseSearchForm: document.querySelector('.exercise-search-form'),\n};\n\nconst createQuoteMarkup = async () => {\n  let stored = localStorage.getItem('DailyQuote');\n  let data = stored ? JSON.parse(stored) : null;\n\n  const isExpired = !data || Date.now() - data.date > 86400000;\n\n  if (isExpired) {\n    const { author, quote } = await getQuote();\n    data = { author, quote, dateStamp: Date.now() };\n\n    localStorage.setItem('DailyQuote', JSON.stringify(data));\n\n    refs.quoteBlock.children[1].textContent = data.quote;\n    refs.quoteBlock.children[2].textContent = data.author;\n  }\n\n  refs.quoteBlock.children[1].textContent = data.quote;\n  refs.quoteBlock.children[2].textContent = data.author;\n};\n\nlet query;\nlet category;\nlet markup;\nconst exerciseFilterBtn = [\n  ...refs.filterList.querySelectorAll('button[data-filter]'),\n];\n\nconst renderExercise = async (query, choosenPage) => {\n  const { results, totalPages, page } = await getExercise(query, choosenPage);\n  markup = results\n    .map(\n      ({ imgUrl, name, filter }) => `\n          <li class=\"exercise-item\" style=\"--img: url(${imgUrl})\">\n            <h3 class=\"exercise-subtitle\">${\n              name[0].toUpperCase() + name.slice(1)\n            }</h3>\n            <p class=\"exercise-name\">${filter}</p>\n          </li>\n          `\n    )\n    .join('');\n\n  refs.exerciseList.innerHTML = markup;\n  refs.categoryContainer.innerHTML = '';\n  refs.exerciseSearchForm.classList.add('hidden');\n\n  exercisePagination(page, totalPages);\n  setActivePage(page);\n};\n\nconst exercisePagination = (current = 0, total = 0, maxVisible = 3) => {\n  const half = Math.floor(maxVisible / 2);\n\n  let start = current - half;\n  let end = current + half;\n\n  if (start < 1) {\n    start = 1;\n    end = maxVisible;\n  }\n\n  if (end > total) {\n    end = total;\n    start = total - maxVisible + 1;\n  }\n\n  if (start < 1) start = 1;\n\n  const pages = [];\n  for (let i = start; i <= end; i++) {\n    pages.push(i);\n  }\n\n  const result = [];\n\n  //! Left \"...\"\n  if (start > 1) {\n    result.push(1); //! First page\n    result.push('...'); //! Spacer\n  }\n\n  //! Main pages\n  result.push(...pages);\n\n  //! Right \"...\"\n  if (end < total) {\n    result.push('...'); //! Spacer\n    result.push(total); //! Last page\n  }\n\n  const paginationBtns = result\n    .map(\n      el => `<li class=\"pages_list-item\">\n                <button type=\"button\" class=\"pages_list-btn\">${el}</button>\n            </li>`\n    )\n    .join('');\n\n  refs.pagination.innerHTML = paginationBtns;\n\n  [...document.querySelectorAll('.pages_list-btn')].forEach(el => {\n    if (el.textContent.trim() === '...') {\n      el.classList.add('disabled');\n    }\n  });\n};\n\nconst renderInfo = async ({ category, query, currentPage, searchTarget }) => {\n  const { results, totalPages, page } = await getExerciseInfo(\n    category,\n    query,\n    currentPage\n  );\n\n  markup = results\n    .filter(({ target }) => (searchTarget ? searchTarget === target : target))\n    .map(({ target, rating, burnedCalories, bodyPart, time, name }) => {\n      const formattedRating = String(rating.toFixed(1));\n\n      return `\n            <li class=\"exercise-info\">\n              <button class=\"startBtn\" type=\"button\">Start\n                <svg class=\"exercise-arrow-icon\">\n                  <use href=\"${spritePath}#icon-arrow\"></use>\n                </svg>\n              </button>\n              <p class=\"info-label\">Workout</p>\n              <span class=\"info-ranking\">${formattedRating}\n                <svg>\n                  <use href=\"${spritePath}#icon-star\"></use>\n                </svg>\n              </span>\n                <div class=\"info-wrapper\">\n                  <svg class=\"exercise-icon\">\n                    <use href=\"${spritePath}#icon-man\"></use>\n                  </svg>\n                  <h2 class=\"info-title\">${name}</h2>\n                </div>\n                  <ul class=\"info-list\">\n                    <li class=\"info-item\">Burned calories: <span>${burnedCalories} / ${time} min</span></li>\n                    <li class=\"info-item\">Body part: <span>${bodyPart}</span></li>\n                    <li class=\"info-item\">Target: <span>${target}</span></li>\n                  </ul>\n            </li>\n    `;\n    })\n    .join('');\n\n  const upperCaseQuery = query[0].toUpperCase() + query.slice(1);\n  refs.categoryContainer.innerHTML = `<span class=\"exercise-category\">${upperCaseQuery}</span>`;\n\n  let isEmpty;\n\n  if (markup.trim() === '') {\n    isEmpty = true;\n    markup = `<h3 class=\"unsucces-title\">Unfortunately, <span>no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</h3>`;\n  } else {\n    isEmpty = false;\n  }\n\n  refs.exerciseList.innerHTML = markup;\n\n  isEmpty ? exercisePagination() : exercisePagination(page, totalPages);\n\n  setActivePage(page);\n\n  return isEmpty;\n};\n\nconst setActivePage = activePage => {\n  const pageListFilterBtn = [...document.querySelectorAll('.pages_list-btn')];\n\n  pageListFilterBtn.forEach(el => {\n    const numericPage = parseFloat(el.textContent);\n    const currentPage = parseFloat(activePage);\n\n    if (numericPage === currentPage) {\n      el.classList.add('active');\n      el.disabled = true;\n    } else {\n      el.classList.remove('active');\n      el.disabled = false;\n    }\n  });\n};\n\ncreateQuoteMarkup();\nrenderExercise();\n\nrefs.pagination.addEventListener('click', e => {\n  if (e.target.classList.contains('pages_list-btn')) {\n    const currentPage = parseFloat(e.target.textContent);\n    const target = document.querySelector('.exercise-info');\n    target\n      ? renderInfo({ category, query, currentPage })\n      : renderExercise(query, currentPage);\n  }\n});\n\nrefs.filterList.addEventListener('click', e => {\n  const target = e.target.dataset.filter;\n  query = e.target.textContent.trim();\n\n  if (target) {\n    exerciseFilterBtn.forEach(el => {\n      el.classList.remove('active');\n      el.disabled = false;\n    });\n\n    e.target.classList.add('active');\n    e.target.disabled = true;\n    renderExercise(query);\n  }\n});\n\nrefs.exerciseList.addEventListener('click', e => {\n  const target = e.target.closest('.exercise-item');\n\n  if (target) {\n    query = target.children[0].textContent.toLowerCase();\n    category = target.children[1].textContent;\n\n    exerciseFilterBtn.forEach(el => {\n      el.disabled = false;\n    });\n\n    renderInfo({ category, query });\n    refs.exerciseSearchForm.classList.remove('hidden');\n  }\n});\n\nrefs.exerciseSearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const formData = new FormData(refs.exerciseSearchForm);\n  const searchTarget = Object.fromEntries(formData).search.toLowerCase();\n  const status = await renderInfo({ category, query, searchTarget });\n\n  if (!status) {\n    e.target.reset();\n  }\n});\n"],"names":["axios","getQuote","data","getExercise","query","page","windowWidth","limit","getExerciseInfo","category","spritePath","refs","createQuoteMarkup","stored","author","quote","markup","exerciseFilterBtn","renderExercise","choosenPage","results","totalPages","imgUrl","name","filter","exercisePagination","setActivePage","current","total","maxVisible","half","start","end","pages","i","result","paginationBtns","el","renderInfo","currentPage","searchTarget","target","rating","burnedCalories","bodyPart","time","formattedRating","upperCaseQuery","isEmpty","activePage","numericPage","e","formData"],"mappings":"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"}