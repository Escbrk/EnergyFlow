{"version":3,"file":"index.js","sources":["../src/js/pagination.js","../src/js/activePage.js","../src/js/exercises.js","../src/js/render.js","../src/js/subscriptionForm.js"],"sourcesContent":["import { refs } from './refs.js';\nimport { globalState } from './globalState.js';\nimport { renderExercise, renderInfo } from './exercises.js';\n\nconst exercisePagination = (current = 0, total = 0, maxVisible = 3) => {\n  const half = Math.floor(maxVisible / 2);\n\n  let start = current - half;\n  let end = current + half;\n\n  if (start < 1) {\n    start = 1;\n    end = maxVisible;\n  }\n\n  if (end > total) {\n    end = total;\n    start = total - maxVisible + 1;\n  }\n\n  if (start < 1) start = 1;\n\n  const pages = [];\n  for (let i = start; i <= end; i++) {\n    pages.push(i);\n  }\n\n  const result = [];\n\n  //! Left \"...\"\n  if (start > 1) {\n    result.push(1); //! First page\n    result.push('...'); //! Spacer\n  }\n\n  //! Main pages\n  result.push(...pages);\n\n  //! Right \"...\"\n  if (end < total) {\n    result.push('...'); //! Spacer\n    result.push(total); //! Last page\n  }\n\n  const paginationBtns = result\n    .map(\n      el => `<li class=\"pages_list-item\">\n                <button type=\"button\" class=\"pages_list-btn\">${el}</button>\n            </li>`\n    )\n    .join('');\n\n  refs.pagination.innerHTML = paginationBtns;\n\n  [...document.querySelectorAll('.pages_list-btn')].forEach(el => {\n    if (el.textContent.trim() === '...') {\n      el.classList.add('disabled');\n    }\n  });\n};\n\nrefs.pagination.addEventListener('click', e => {\n  if (e.target.classList.contains('pages_list-btn')) {\n    const currentPage = parseFloat(e.target.textContent);\n    const target = document.querySelector('.exercise-info');\n\n    const exerciseSection = document.querySelector('.exercises-section');\n\n    if (exerciseSection) {\n      exerciseSection.scrollIntoView();\n    }\n\n    target\n      ? renderInfo({\n          category: globalState.category,\n          query: globalState.query,\n          currentPage,\n          searchTarget: globalState.searchTarget,\n        })\n      : renderExercise(globalState.query, currentPage);\n  }\n});\n\nexport default exercisePagination;\n","export const setActivePage = activePage => {\n  const pageListFilterBtn = [...document.querySelectorAll('.pages_list-btn')];\n\n  pageListFilterBtn.forEach(el => {\n    const numericPage = parseFloat(el.textContent);\n    const currentPage = parseFloat(activePage);\n\n    if (numericPage === currentPage) {\n      el.classList.add('active');\n      el.disabled = true;\n    } else {\n      el.classList.remove('active');\n      el.disabled = false;\n    }\n  });\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getExercise, getExerciseInfo } from './api.js';\nimport { capitalize } from './capitalize.js';\nimport { refs } from './refs.js';\nimport exercisePagination from './pagination.js';\nimport { setActivePage } from './activePage.js';\nimport spritePath from '../img/svg/sprite.svg';\nimport { globalState } from './globalState.js';\nimport { loader } from './handlers/loader.js';\n\nexport const renderExercise = async (query, choosenPage) => {\n  refs.exerciseSearchForm.classList.add('hidden');\n  refs.exerciseList.innerHTML = `<li>${loader()}</li>`;\n\n  try {\n    const { results, totalPages, page } = await getExercise(query, choosenPage);\n    const markup = results\n      .map(\n        ({ imgUrl, name, filter }) => `\n          <li class=\"exercise-item\" style=\"--img: url(${imgUrl})\">\n            <h3 class=\"exercise-subtitle\">${capitalize(name)}</h3>\n            <p class=\"exercise-name\">${filter}</p>\n          </li>\n          `\n      )\n      .join('');\n\n    if (!results.length) {\n      throw new Error();\n    }\n\n    refs.exerciseList.innerHTML = markup;\n    refs.categoryContainer.innerHTML = '';\n\n    document.querySelector('.search-input').value = '';\n\n    exercisePagination(Number(page), totalPages);\n    setActivePage(page);\n  } catch ({ message }) {\n    refs.exerciseList.innerHTML = '';\n\n    iziToast.error({\n      title: 'Error',\n      message: `Failet to fetch exercises ${message}`,\n    });\n  }\n};\n\nexport const renderInfo = async ({\n  category,\n  query,\n  currentPage,\n  searchTarget,\n}) => {\n  refs.exerciseList.innerHTML = `<li>${loader()}</li>`;\n\n  try {\n    const { results, totalPages, page } = await getExerciseInfo(\n      category,\n      query,\n      currentPage,\n      searchTarget\n    );\n\n    let markup = results\n      .map(({ target, rating, burnedCalories, bodyPart, time, name, _id }) => {\n        const formattedRating = String(rating.toFixed(1));\n\n        return `\n            <li class=\"exercise-info\" data-id=${_id}>\n              <button class=\"startBtn\" type=\"button\">Start\n                <svg class=\"exercise-arrow-icon\">\n                  <use href=\"${spritePath}#icon-arrow\"></use>\n                </svg>\n              </button>\n              <p class=\"info-label\">Workout</p>\n              <span class=\"info-ranking\">${formattedRating}\n                <svg>\n                  <use href=\"${spritePath}#icon-star\"></use>\n                </svg>\n              </span>\n                <div class=\"info-wrapper\">\n                  <svg class=\"exercise-icon\">\n                    <use href=\"${spritePath}#icon-man\"></use>\n                  </svg>\n                  <h2 class=\"info-title\">${name}</h2>\n                </div>\n                  <ul class=\"info-list\">\n                    <li class=\"info-item\">Burned calories: <span>${burnedCalories} / ${time} min</span></li>\n                    <li class=\"info-item\">Body part: <span>${capitalize(\n                      bodyPart\n                    )}</span></li>\n                    <li class=\"info-item\">Target: <span>${capitalize(\n                      target\n                    )}</span></li>\n                  </ul>\n            </li>\n    `;\n      })\n      .join('');\n\n    refs.categoryContainer.innerHTML = `<span class=\"exercise-category\">${capitalize(\n      globalState.query\n    )}</span>`;\n\n    let isEmpty;\n\n    if (markup.trim() === '') {\n      isEmpty = true;\n      markup = `<h3 class=\"unsucces-title\">Unfortunately, <span>no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</h3>`;\n    } else {\n      isEmpty = false;\n    }\n\n    refs.exerciseList.innerHTML = markup;\n\n    isEmpty ? exercisePagination() : exercisePagination(page, totalPages);\n\n    setActivePage(page);\n\n    return isEmpty;\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch information about exercises',\n    });\n\n    refs.exerciseList.innerHTML = '';\n    refs.exerciseSearchForm.style.display = 'none';\n  }\n};\n","import { globalState } from './globalState.js';\nimport { refs } from './refs.js';\nimport { renderExercise, renderInfo } from './exercises.js';\nimport { renderExerciseById } from './modal.js';\nimport exercisePagination from './pagination.js';\n\nconst filterList = document.querySelector('.filter-list');\n\nconst exerciseFilterBtn = [\n  ...filterList.querySelectorAll('button[data-filter]'),\n];\n\nfilterList.addEventListener('click', e => {\n  const target = e.target.dataset.filter;\n  globalState.query = e.target.textContent.trim();\n\n  if (target) {\n    exerciseFilterBtn.forEach(el => {\n      el.classList.remove('active');\n      el.disabled = false;\n    });\n\n    e.target.classList.add('active');\n    e.target.disabled = true;\n    exercisePagination();\n    renderExercise(globalState.query);\n  }\n});\n\nrenderExercise(globalState.query);\n\nrefs.exerciseList.addEventListener('click', async e => {\n  const target = e.target.closest('.exercise-item');\n\n  if (target) {\n    globalState.query = target.children[0].textContent.toLowerCase();\n    globalState.category = target.children[1].textContent;\n\n    exerciseFilterBtn.forEach(el => {\n      el.disabled = false;\n    });\n\n    exercisePagination();\n    await renderInfo({\n      category: globalState.category,\n      query: globalState.query,\n    });\n    refs.exerciseSearchForm.classList.remove('hidden');\n  }\n\n  const targetBtn = e.target.closest('.startBtn');\n\n  if (targetBtn) {\n    const id = e.target.closest('.exercise-info').dataset.id;\n    const type = e.currentTarget.dataset.type;\n\n    await renderExerciseById(id, type);\n    refs.backdrop.classList.remove('hidden');\n    document.body.classList.add('noScroll');\n  }\n});\n\nrefs.exerciseSearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const formData = new FormData(refs.exerciseSearchForm);\n  globalState.searchTarget = Object.fromEntries(formData).search.toLowerCase();\n\n  exercisePagination();\n  const status = await renderInfo({\n    category: globalState.category,\n    query: globalState.query,\n    searchTarget: globalState.searchTarget,\n  });\n\n  if (!status) {\n    refs.exerciseSearchForm.reset();\n  }\n});\n","import { refs } from './refs.js';\nimport { subscribe } from './api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nrefs.footerForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const formData = new FormData(form);\n\n  const data = Object.fromEntries(formData);\n\n  try {\n    const res = await subscribe(data);\n\n    iziToast.success({\n      title: 'Succes',\n      message: res.data.message,\n    });\n    form.reset();\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: err.response.data.message,\n    });\n  }\n});\n"],"names":["exercisePagination","current","total","maxVisible","half","start","end","pages","i","result","paginationBtns","el","refs","currentPage","target","exerciseSection","renderInfo","globalState","renderExercise","setActivePage","activePage","numericPage","query","choosenPage","loader","results","totalPages","page","getExercise","markup","imgUrl","name","filter","capitalize","message","iziToast","category","searchTarget","getExerciseInfo","rating","burnedCalories","bodyPart","time","_id","formattedRating","spritePath","isEmpty","error","filterList","exerciseFilterBtn","id","type","renderExerciseById","formData","form","data","res","subscribe","err"],"mappings":"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"}